<!DOCTYPE html>
<html class="no-js" lang="en">
<!--!
  Oh so you're an inspector?
  View the source here: https://github.com/maxboeck/mxb
-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Color Theme Switcher | Max Böck</title>
        <link rel="preload" href="/assets/fonts/noe-display-medium.woff2" as="font" type="font/woff2" crossorigin>
        <link rel="preconnect" href="https://webmention.io">

        <link rel="stylesheet" href="/assets/styles/themes.css">
        <link rel="stylesheet" href="/assets/styles/main.css">

        

<meta name="description" content="Let users customize your website with their favorite color scheme! Your site has a dark mode? Mine has ten different themes now, and they&#39;re named after Mario Kart 64 race tracks."><meta name="image" content="https://mxb.dev/blog/color-theme-switcher/cover.jpg"><meta property="og:title" content="Color Theme Switcher">
<meta property="og:description" content="Let users customize your website with their favorite color scheme! Your site has a dark mode? Mine has ten different themes now, and they&#39;re named after Mario Kart 64 race tracks.">
<meta property="og:url" content="https://mxb.dev/blog/color-theme-switcher/">
<meta property="og:image" content="https://mxb.dev/blog/color-theme-switcher/cover.jpg">
<meta name="twitter:card" content="summary_large_image">

<meta property="og:type" content="article">
    <meta property="article:published_time" content="2020-04-30T00:00:00">
<meta name="author" content="Max Böck">
<meta property="og:site_name" content="Max Böck">
<meta property="og:locale" content="en_US">
<meta name="twitter:site" content="@mxbck">
<meta name="twitter:creator" content="@mxbck">
<meta property="fb:app_id" content="127677017332959">

<link rel="canonical" href="https://mxb.dev/blog/color-theme-switcher/">


<script type="application/ld+json">
    {
        "name":"Max Böck",
        "description":"Max Böck is a professional front-end developer based in Vienna, Austria.",
        "author": {
            "@type":"Person",
            "name":"Max Böck"
        },
        "@type":"WebSite",
        "url":"https://mxb.dev",
        "image":"https://mxb.dev/assets/images/avatar2.jpg",
        "headline":"Max Böck",
        "sameAs":[
            "https://twitter.com/mxbck",
            "https://github.com/maxboeck"
        ],
        "@context":"http://schema.org"
    }
</script>


<link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon/apple-touch-icon.png?v=1">
<link rel="icon" type="image/png" href="/assets/images/favicon/favicon-32x32.png?v=1" sizes="32x32">
<link rel="icon" type="image/png" href="/assets/images/favicon/favicon-16x16.png?v=1" sizes="16x16">
<link rel="mask-icon" href="/assets/images/favicon/safari-pinned-tab.svg?v=1" color="#1a1a1a">
<link rel="shortcut icon" href="/assets/images/favicon/favicon.ico?v=1">
<link rel="manifest" href="/site.webmanifest">
<meta name="theme-color" content="#1a1a1a">


<link type="application/atom+xml" rel="alternate" href="https://mxb.dev/feed.xml" title="Max Böck">
<link type="application/atom+xml" rel="alternate" href="https://mxb.dev/notes/feed.xml" title="Max Böck | Notes">


<link rel="authorization_endpoint" href="https://indieauth.com/auth" />
<link rel="token_endpoint" href="https://tokens.indieauth.com/token" />
<meta name="monetization" content="$ilp.uphold.com/7qZLaNKjDa87">


<link rel="pingback" href="https://webmention.io/mxb.dev/xmlrpc">
<link rel="webmention" href="https://webmention.io/mxb.dev/webmention">
        <script>(function() {
    var theme = localStorage.getItem('theme');
    window.metaColors = {'default':'#f7f7f9','dark':'#252526','beach':'#e3f6f5','choco':'#41312E','moomoo':'#f3e1d8','bowser':'#29293e','yoshi':'#f2ede9','rainbow':'#311b46','lobster':'#ffb9ad','hackernews':'#F8F8EC'};
    if (theme) {
        document.documentElement.setAttribute('data-theme', theme);
        document.querySelector('meta[name="theme-color"]').setAttribute('content', window.metaColors[theme]);
    }
})();</script>
    </head>
    <body>
        <a href="#main" class="sr-skip-link">skip to main content</a>
        <div class="titlebar">
    <div class="titlebar__inner"></div>
</div>

        <div class="hfeed layout" role="document">
            <div class="themepicker js-themepicker" data-nosnippet hidden>
    <h3 class="themepicker__title">Select Theme</h3>
    <ul class="themepicker__list" id="theme-menu">
    
        <li class="themepicker__item">
            <button 
                class="themepicker__btn js-themepicker-themeselect" 
                aria-label="select color theme 'Classic'" 
                data-theme="default" 
            >
                <span class="themepicker__name">Classic</span>
                <span class="themepicker__palette">
                    <span class="themepicker__hue themepicker__hue--primary"></span>
                    <span class="themepicker__hue themepicker__hue--secondary"></span>
                    <span class="themepicker__hue themepicker__hue--border"></span>
                    <span class="themepicker__hue themepicker__hue--textoffset"></span>
                    <span class="themepicker__hue themepicker__hue--text"></span>
                </span>
            </button>
        </li>
    
        <li class="themepicker__item">
            <button 
                class="themepicker__btn js-themepicker-themeselect" 
                aria-label="select color theme 'Dark'" 
                data-theme="dark" 
            >
                <span class="themepicker__name">Dark</span>
                <span class="themepicker__palette">
                    <span class="themepicker__hue themepicker__hue--primary"></span>
                    <span class="themepicker__hue themepicker__hue--secondary"></span>
                    <span class="themepicker__hue themepicker__hue--border"></span>
                    <span class="themepicker__hue themepicker__hue--textoffset"></span>
                    <span class="themepicker__hue themepicker__hue--text"></span>
                </span>
            </button>
        </li>
    
        <li class="themepicker__item">
            <button 
                class="themepicker__btn js-themepicker-themeselect" 
                aria-label="select color theme 'Koopa Beach'" 
                data-theme="beach" 
            >
                <span class="themepicker__name">Koopa Beach</span>
                <span class="themepicker__palette">
                    <span class="themepicker__hue themepicker__hue--primary"></span>
                    <span class="themepicker__hue themepicker__hue--secondary"></span>
                    <span class="themepicker__hue themepicker__hue--border"></span>
                    <span class="themepicker__hue themepicker__hue--textoffset"></span>
                    <span class="themepicker__hue themepicker__hue--text"></span>
                </span>
            </button>
        </li>
    
        <li class="themepicker__item">
            <button 
                class="themepicker__btn js-themepicker-themeselect" 
                aria-label="select color theme 'Choco Mountain'" 
                data-theme="choco" 
            >
                <span class="themepicker__name">Choco Mountain</span>
                <span class="themepicker__palette">
                    <span class="themepicker__hue themepicker__hue--primary"></span>
                    <span class="themepicker__hue themepicker__hue--secondary"></span>
                    <span class="themepicker__hue themepicker__hue--border"></span>
                    <span class="themepicker__hue themepicker__hue--textoffset"></span>
                    <span class="themepicker__hue themepicker__hue--text"></span>
                </span>
            </button>
        </li>
    
        <li class="themepicker__item">
            <button 
                class="themepicker__btn js-themepicker-themeselect" 
                aria-label="select color theme 'Moo Moo Farm'" 
                data-theme="moomoo" 
            >
                <span class="themepicker__name">Moo Moo Farm</span>
                <span class="themepicker__palette">
                    <span class="themepicker__hue themepicker__hue--primary"></span>
                    <span class="themepicker__hue themepicker__hue--secondary"></span>
                    <span class="themepicker__hue themepicker__hue--border"></span>
                    <span class="themepicker__hue themepicker__hue--textoffset"></span>
                    <span class="themepicker__hue themepicker__hue--text"></span>
                </span>
            </button>
        </li>
    
        <li class="themepicker__item">
            <button 
                class="themepicker__btn js-themepicker-themeselect" 
                aria-label="select color theme 'Bowser&#39;s Castle'" 
                data-theme="bowser" 
            >
                <span class="themepicker__name">Bowser&#39;s Castle</span>
                <span class="themepicker__palette">
                    <span class="themepicker__hue themepicker__hue--primary"></span>
                    <span class="themepicker__hue themepicker__hue--secondary"></span>
                    <span class="themepicker__hue themepicker__hue--border"></span>
                    <span class="themepicker__hue themepicker__hue--textoffset"></span>
                    <span class="themepicker__hue themepicker__hue--text"></span>
                </span>
            </button>
        </li>
    
        <li class="themepicker__item">
            <button 
                class="themepicker__btn js-themepicker-themeselect" 
                aria-label="select color theme 'Yoshi Valley'" 
                data-theme="yoshi" 
            >
                <span class="themepicker__name">Yoshi Valley</span>
                <span class="themepicker__palette">
                    <span class="themepicker__hue themepicker__hue--primary"></span>
                    <span class="themepicker__hue themepicker__hue--secondary"></span>
                    <span class="themepicker__hue themepicker__hue--border"></span>
                    <span class="themepicker__hue themepicker__hue--textoffset"></span>
                    <span class="themepicker__hue themepicker__hue--text"></span>
                </span>
            </button>
        </li>
    
        <li class="themepicker__item">
            <button 
                class="themepicker__btn js-themepicker-themeselect" 
                aria-label="select color theme 'Rainbow Road'" 
                data-theme="rainbow" 
            >
                <span class="themepicker__name">Rainbow Road</span>
                <span class="themepicker__palette">
                    <span class="themepicker__hue themepicker__hue--primary"></span>
                    <span class="themepicker__hue themepicker__hue--secondary"></span>
                    <span class="themepicker__hue themepicker__hue--border"></span>
                    <span class="themepicker__hue themepicker__hue--textoffset"></span>
                    <span class="themepicker__hue themepicker__hue--text"></span>
                </span>
            </button>
        </li>
    
        <li class="themepicker__item">
            <button 
                class="themepicker__btn js-themepicker-themeselect" 
                aria-label="select color theme 'Lobster Life'" 
                data-theme="lobster" 
            >
                <span class="themepicker__name">Lobster Life</span>
                <span class="themepicker__palette">
                    <span class="themepicker__hue themepicker__hue--primary"></span>
                    <span class="themepicker__hue themepicker__hue--secondary"></span>
                    <span class="themepicker__hue themepicker__hue--border"></span>
                    <span class="themepicker__hue themepicker__hue--textoffset"></span>
                    <span class="themepicker__hue themepicker__hue--text"></span>
                </span>
            </button>
        </li>
    
        <li class="themepicker__item">
            <button 
                class="themepicker__btn js-themepicker-themeselect" 
                aria-label="select color theme 'Hacker News'" 
                data-theme="hackernews" 
            >
                <span class="themepicker__name">Hacker News</span>
                <span class="themepicker__palette">
                    <span class="themepicker__hue themepicker__hue--primary"></span>
                    <span class="themepicker__hue themepicker__hue--secondary"></span>
                    <span class="themepicker__hue themepicker__hue--border"></span>
                    <span class="themepicker__hue themepicker__hue--textoffset"></span>
                    <span class="themepicker__hue themepicker__hue--text"></span>
                </span>
            </button>
        </li>
    
    </ul>
    <button class="iconbtn themepicker__close js-themepicker-close">
        <span class="sr-only">close themepicker</span>
        <svg class="icon icon--close" role="img" aria-hidden="true" width="24" height="24"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/icons/icons.sprite.svg#icon-close"></use></svg>
    </button>
</div>
            <header class="header" role="banner">
    <div class="header__inner container">

        <a class="header__brand" href="/" rel="home">
            <img class="header__avatar" src="data:image/jpeg;base64,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" width="48" height="48" alt="" />
            <span class="header__name">
                <span>Max Böck</span>
                <span class="header__verification" aria-hidden="true">
                    <svg class="icon icon--verified" version="1.1" viewBox="0,0,24,24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M22.5 12.5c0-1.58-.875-2.95-2.148-3.6.154-.435.238-.905.238-1.4 0-2.21-1.71-3.998-3.818-3.998-.47 0-.92.084-1.336.25C14.818 2.415 13.51 1.5 12 1.5s-2.816.917-3.437 2.25c-.415-.165-.866-.25-1.336-.25-2.11 0-3.818 1.79-3.818 4 0 .494.083.964.237 1.4-1.272.65-2.147 2.018-2.147 3.6 0 1.495.782 2.798 1.942 3.486-.02.17-.032.34-.032.514 0 2.21 1.708 4 3.818 4 .47 0 .92-.086 1.335-.25.62 1.334 1.926 2.25 3.437 2.25 1.512 0 2.818-.916 3.437-2.25.415.163.865.248 1.336.248 2.11 0 3.818-1.79 3.818-4 0-.174-.012-.344-.033-.513 1.158-.687 1.943-1.99 1.943-3.484zm-6.616-3.334l-4.334 6.5c-.145.217-.382.334-.625.334-.143 0-.288-.04-.416-.126l-.115-.094-2.415-2.415c-.293-.293-.293-.768 0-1.06s.768-.294 1.06 0l1.77 1.767 3.825-5.74c.23-.345.696-.436 1.04-.207.346.23.44.696.21 1.04z"/>
                    </svg>
                </span>
            </span>
        </a>

        <div class="header__nav">
            <nav class="nav js-nav" role="navigation" tabindex="-1">

    
    <button
        class="iconbtn nav__togglebtn js-nav-toggle"
        aria-expanded="false"
        aria-controls="nav-menu"
        aria-label="toggle menu"
    >
        <span class="menuicon">
            <span class="menuicon__bar"></span>
            <span class="menuicon__bar"></span>
            <span class="menuicon__bar"></span>
            <span class="menuicon__bar"></span>
        </span>
    </button>

    
    <div class="nav__content">
        <ul class="nav__menu js-nav-menu" id="nav-menu"><li class="nav__item">
                    <a
                        href="/"
                        class="nav__link"
                        
                    >
                        <span class="nav__num" aria-hidden="true">01</span>
                        Home
                    </a>
                </li><li class="nav__item nav__item--active">
                    <a
                        href="/blog/"
                        class="nav__link"
                        
                    >
                        <span class="nav__num" aria-hidden="true">02</span>
                        Writing
                    </a>
                </li><li class="nav__item">
                    <a
                        href="/notes/"
                        class="nav__link"
                        
                    >
                        <span class="nav__num" aria-hidden="true">03</span>
                        Notes
                    </a>
                </li><li class="nav__item">
                    <a
                        href="/about/"
                        class="nav__link"
                        
                    >
                        <span class="nav__num" aria-hidden="true">04</span>
                        About
                    </a>
                </li></ul>
    </div>
    
    
    <div class="nav__bg">
        <div class="nav__bg__circle"></div>
    </div>

</nav>

            <button
                class="iconbtn header__themebtn js-themepicker-toggle"
                aria-expanded="false"
                aria-controls="theme-menu"
            >
                <span class="sr-only">toggle theme panel</span>
                <svg class="icon icon--theme" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" role="img" aria-hidden="true">
                    <path d="M18 4V3c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V6h1v4H9v11c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-9h8V4h-3z"/>
                </svg>
            </button>
        </div>

    </div>
</header>

            <main class="main container" role="main" id="main" tabindex="-1">
                <article 
    id="color-theme-switcher" 
    class="post h-entry" 
    role="article" 
    itemscope 
    itemtype="http://schema.org/BlogPosting" 
    aria-labelledby="color-theme-switcher-title" 
>
    <header class="post__header">
        <h1 id="color-theme-switcher-title" class="post__title p-name title" itemprop="headline">Color Theme Switcher</h1>
        <div class="post__meta">

            <p >
                <time class="post__date dt-published" itemprop="datePublished" datetime="2020-04-30T00:00:00">30 Apr 2020</time>
                
                <span aria-label="in category">&sdot;</span> <span class="post__tags p-category">code, design</span>
                
                
            </p>

            

        </div>
    </header>

    <div class="post__content e-content markdown" itemprop="articleBody">
        <p class="lead">Last year, the design gods decided that dark modes were the new hotness. "Light colors are for suckers", they laughed, drinking matcha tea on their fixie bikes or whatever.</p>
<p>And so every operating system, app and even some websites (mine included) suddenly had to come up with a dark mode. Fortunately though, this coincided nicely with widespread support for CSS <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/--*">custom properties</a> and the introduction of a new <code>prefers-color-scheme</code> media query.</p>
<p>There’s lots of tutorials on <a href="https://css-tricks.com/dark-modes-with-css/">how to build dark modes</a> already, but why limit yourself to light and dark? Only a Sith deals in absolutes.</p>
<p>That’s why I decided to build a new feature on my site:<br>
<strong>dynamic color themes!</strong> Yes, instead of two color schemes, I now have ten! That’s eight (8) better!</p>
<p>Go ahead and try it, hit that <strong>paintroller-button</strong> in the header.<br>
I’ll wait.</p>
<p><em>If you’re reading this somewhere else, the effect would look something like this:</em></p>
<div class="extend">
  <video poster="https://res.cloudinary.com/mxb/image/upload/v1620053481/theme-switcher-still_tq9zv2.png" width="752" height="452" preload="metadata" style="border: 1px solid var(--color-border)" muted controls>
    <source src="https://res.cloudinary.com/mxb/video/upload/q_auto/v1620053481/theme-switcher_q2nt7u.webm" type="video/webm" />
    <source src="https://res.cloudinary.com/mxb/video/upload/q_auto/v1620053491/theme-switcher_h9ehlj.mov" type="video/mp4" />
  </video>
</div>
<p>Nice, right? Let’s look at how to do that!</p>
<h2 id="h-define-color-schemes"><a class="heading-anchor" href="#h-define-color-schemes" aria-hidden="true">#</a> Define Color Schemes</h2>
<p>First up, we need some data. We need to define our themes in a central location, so they’re easy to access and edit. My site uses <a href="https://www.11ty.dev/">Eleventy</a>, which lets me create a simple JSON file for that purpose:</p>
<pre class="language-json"><code class="language-json"><span class="token comment">// themes.json</span><br><span class="token punctuation">[</span><br>    <span class="token punctuation">{</span><br>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"bowser"</span><span class="token punctuation">,</span><br>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Bowser's Castle"</span><span class="token punctuation">,</span><br>        <span class="token property">"colors"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>            <span class="token property">"primary"</span><span class="token operator">:</span> <span class="token string">"#7f5af0"</span><span class="token punctuation">,</span><br>            <span class="token property">"secondary"</span><span class="token operator">:</span> <span class="token string">"#2cb67d"</span><span class="token punctuation">,</span><br>            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"#fffffe"</span><span class="token punctuation">,</span><br>            <span class="token property">"border"</span><span class="token operator">:</span> <span class="token string">"#383a61"</span><span class="token punctuation">,</span><br>            <span class="token property">"background"</span><span class="token operator">:</span> <span class="token string">"#16161a"</span><span class="token punctuation">,</span><br>            <span class="token property">"primaryOffset"</span><span class="token operator">:</span> <span class="token string">"#e068fd"</span><span class="token punctuation">,</span><br>            <span class="token property">"textOffset"</span><span class="token operator">:</span> <span class="token string">"#94a1b2"</span><span class="token punctuation">,</span><br>            <span class="token property">"backgroundOffset"</span><span class="token operator">:</span> <span class="token string">"#29293e"</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span>...<span class="token punctuation">}</span><br><span class="token punctuation">]</span></code></pre>
<p>Our color schemes are objects in an array, which is now available during build. Each theme gets a <code>name</code>, <code>id</code> and a couple of color definitions. The parts of a color scheme depend on your specific design; In my case, I assigned each theme eight properties.</p>
<div class="callout callout--tip"><span class="callout__icon"><svg class="icon icon--lightbulb" role="img" aria-hidden="true" width="24" height="24"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/icons/icons.sprite.svg#icon-lightbulb"></use></svg></span><div class="callout__content"><p>It's a good idea to give these properties logical names instead of visual ones like &quot;light&quot; or &quot;muted&quot;, as colors vary from theme to theme. I've also found it helpful to define a couple of &quot;offset&quot; colors - these are used to adjust another color on interactions like hover and such.</p></div></div>
<p>In addition to the “default” and “dark” themes I already had before, I created eight more themes this way. I used a couple of different sources for inspiration; the ones I liked best are <a href="https://color.adobe.com/explore">Adobe Color</a> and <a href="https://www.happyhues.co/">happyhues</a>.</p>
<p>All my themes are named after Mario Kart 64 race tracks by the way, because why not.</p>
<h2 id="h-transform-to-custom-css-properties"><a class="heading-anchor" href="#h-transform-to-custom-css-properties" aria-hidden="true">#</a> Transform to Custom CSS Properties</h2>
<p>To actually use our colors in CSS, we need them in a different format. Let’s create a stylesheet and make custom properties out of them. Using Eleventy’s template rendering, we can do that by generating a <code>theme.css</code> file from the data, looping over all themes. We’ll use a macro to output the color definitions for each.</p>
<p>I wrote this in Nunjucks, the templating engine of my choice - but you can do it in any other language as well.</p>
<pre class="language-css"><code class="language-css"><span class="token comment">/* theme.css.njk */</span><br>---<br><span class="token property">permalink</span><span class="token punctuation">:</span> <span class="token string">'/assets/css/theme.css'</span><br><span class="token property">excludeFromSitemap</span><span class="token punctuation">:</span> true<br>---<br><span class="token comment">/*<br>  this macro will transform the colors in the JSON data<br>  into custom properties to use in CSS.<br>*/</span><br><span class="token punctuation">{</span>% macro <span class="token function">colorscheme</span><span class="token punctuation">(</span>colors<span class="token punctuation">)</span> %<span class="token punctuation">}</span><br>    <span class="token selector">--color-bg:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> colors.background <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token selector">;<br>    --color-bg-offset:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> colors.backgroundOffset <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token selector">;<br>    --color-text:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> colors.text <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token selector">;<br>    --color-text-offset:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> colors.textOffset <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token selector">;<br>    --color-border:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> colors.border <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token selector">;<br>    --color-primary:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> colors.primary <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token selector">;<br>    --color-primary-offset:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> colors.primaryOffset <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token selector">;<br>    --color-secondary:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> colors.secondary <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token selector">;</span><br><span class="token punctuation">{</span>% endmacro %<span class="token punctuation">}</span><br><br><span class="token comment">/* <br>  get the "default" light and dark color schemes<br>  to use if no other theme was selected<br>*/</span><br><span class="token punctuation">{</span>%- set default = themes|<span class="token function">getTheme</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">)</span> -%<span class="token punctuation">}</span><br><span class="token punctuation">{</span>%- set dark = themes|<span class="token function">getTheme</span><span class="token punctuation">(</span><span class="token string">'dark'</span><span class="token punctuation">)</span> -%<span class="token punctuation">}</span><br><br><span class="token comment">/*<br>  the basic setup will just use the light scheme<br>*/</span><br><span class="token selector">:root</span> <span class="token punctuation">{</span><br>    <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">colorscheme</span><span class="token punctuation">(</span>default.colors<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><span class="token comment">/*<br>  if the user has a system preference for dark schemes,<br>  we'll use the dark theme as default instead<br>*/</span><br><span class="token atrule"><span class="token rule">@media</span><span class="token punctuation">(</span><span class="token property">prefers-color-scheme</span><span class="token punctuation">:</span> dark<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>    <span class="token selector">:root</span> <span class="token punctuation">{</span><br>        <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">colorscheme</span><span class="token punctuation">(</span>dark.colors<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/*<br>  finally, each theme is selectable through a <br>  data-attribute on the document. E.g:<br>  &lt;html data-theme="bowser"><br>*/</span><br><span class="token punctuation">{</span>% for theme in themes %<span class="token punctuation">}</span><br><span class="token selector">[data-theme='{{ theme.id }}']</span> <span class="token punctuation">{</span><br>    <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">colorscheme</span><span class="token punctuation">(</span>theme.colors<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><span class="token punctuation">{</span>% endfor %<span class="token punctuation">}</span><br></code></pre>
<h2 id="h-using-colors-on-the-website"><a class="heading-anchor" href="#h-using-colors-on-the-website" aria-hidden="true">#</a> Using colors on the website</h2>
<p>Now for the tedious part - we need to go through all of the site’s styles and replace every color definition with the corresponding custom property. This is different for every site - but your code might look like this if it’s written in SCSS:</p>
<pre class="language-scss"><code class="language-scss"><span class="token selector">body </span><span class="token punctuation">{</span><br>    <span class="token property">font-family</span><span class="token punctuation">:</span> sans-serif<span class="token punctuation">;</span><br>    <span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token variable">$line-height</span><span class="token punctuation">;</span><br>    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">$gray-dark</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>Replace the static SCSS variable with the theme’s custom property:</p>
<pre class="language-scss"><code class="language-scss"><span class="token selector">body </span><span class="token punctuation">{</span><br>    <span class="token property">font-family</span><span class="token punctuation">:</span> sans-serif<span class="token punctuation">;</span><br>    <span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token variable">$line-height</span><span class="token punctuation">;</span><br>    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--color-text<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<div class="callout callout--warning"><span class="callout__icon"><svg class="icon icon--warning" role="img" aria-hidden="true" width="24" height="24"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/icons/icons.sprite.svg#icon-warning"></use></svg></span><div class="callout__content"><p><strong>Attention:</strong> Custom Properties are supported in <a href="https://caniuse.com/#search=custom%20properties">all modern browsers</a>, but if you need to support IE11 or Opera Mini, be sure to provide a fallback.</p></div></div>
<p>It’s fine to mix static preprocessor variables and custom properties by the way - they do different things. Our line height is not going to change dynamically.</p>
<p>Now do this for every instance of <code>color</code>, <code>background</code>, <code>border</code>, <code>fill</code> … you get the idea. Told you it was gonna be tedious.</p>
<h2 id="h-building-the-theme-switcher"><a class="heading-anchor" href="#h-building-the-theme-switcher" aria-hidden="true">#</a> Building the Theme Switcher</h2>
<p>If you made it this far, congratulations! Your website is now themeable (in theory). We still need a way for people to switch themes without manually editing the markup though, that’s not very user-friendly. We need some sort of UI component for this - a theme switcher.</p>
<h3 id="h-generating-the-markup"><a class="heading-anchor" href="#h-generating-the-markup" aria-hidden="true">#</a> Generating the Markup</h3>
<p>The switcher structure is pretty straightforward: it’s essentially a list of buttons, one for each theme. When a button is pressed, we’ll switch colors. Let’s give the user an idea what to expect by showing the theme colors as little swatches on the button:</p>
<figure class="extend">
    <img src="https://res.cloudinary.com/mxb/image/upload/v1620053480/theme-buttons_ilai00.jpg" loading="lazy" alt="a row of buttons, showing the theme name and color swatches">
    <figcaption>Fact: All good design is derivative of Mario Kart</figcaption>
</figure>
<p>Here’s the template to generate that markup. Since custom properties are cascading, we can set the <code>data-theme</code> attribute on the individual buttons as well, to inherit the correct colors. The button also holds its <code>id</code> in a <code>data-theme-id</code> attribute, we will pick that up with Javascript later.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>themeswitcher<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>{% for theme in themes %}<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>themeswitcher__item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>themepicker__btn js-themepicker-themeselect<span class="token punctuation">"</span></span> <span class="token attr-name">data-theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ theme.id }}<span class="token punctuation">"</span></span> <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>select color theme '{{ theme.name }}'<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>themepicker__name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ theme.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>themepicker__palette<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>themepicker__swatch themepicker__swatch--primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>themepicker__swatch themepicker__swatch--secondary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>themepicker__swatch themepicker__swatch--border<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>themepicker__swatch themepicker__swatch--textoffset<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>themepicker__swatch themepicker__swatch--text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br>{% endfor %}<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br></code></pre>
<pre class="language-scss"><code class="language-scss"><span class="token selector">.themepicker__swatch </span><span class="token punctuation">{</span><br>    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>    <span class="token property">width</span><span class="token punctuation">:</span> 1.5em<span class="token punctuation">;</span><br>    <span class="token property">height</span><span class="token punctuation">:</span> 1.5em<span class="token punctuation">;</span><br>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span><br>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 0 2px #ffffff<span class="token punctuation">;</span><br><br>    <span class="token selector"><span class="token parent important">&amp;</span>--primary </span><span class="token punctuation">{</span><br>        <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--color-primary<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token selector"><span class="token parent important">&amp;</span>--secondary </span><span class="token punctuation">{</span><br>        <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--color-secondary<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token selector"><span class="token parent important">&amp;</span>--border </span><span class="token punctuation">{</span><br>        <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--color-border<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token selector"><span class="token parent important">&amp;</span>--textoffset </span><span class="token punctuation">{</span><br>        <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--color-text-offset<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token selector"><span class="token parent important">&amp;</span>--text </span><span class="token punctuation">{</span><br>        <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--color-text<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>There’s some more styling involved, but I’ll leave that out for brevity here. If you’re interested in the extended version, you can find all the code in <a href="https://github.com/maxboeck/mxb">my site’s github repo</a>.</p>
<aside class="signup js-signup-widget" data-nosnippet><div class="signup__front"><h2 class="signup__title">By the way...</h2><div class="signup__desc">I'm starting an email list for people interested in CSS and design experiments! If you enjoy that kind of stuff, you can join here and I'll notify you whenever I publish a new post. No strings attached, unsubscribe anytime.</div><div class="signup__form"><form action="https://dev.us18.list-manage.com/subscribe/post" method="POST" class="form form--signup"><div class="form__body"><input type="hidden" name="u" value="64781452976687d0f4f2ea370"> <input type="hidden" name="id" value="772b9208b5"> <input type="hidden" name="SOURCE" value="/blog/color-theme-switcher/"><div class="form__fields"><p class="form__field"><label for="mce-FNAME" class="form__label">First Name (optional)</label> <input type="text" class="form__input" value="" name="FNAME" id="mce-FNAME" placeholder="Alice"></p><p class="form__field"><label for="mce-EMAIL" class="form__label">Email Address</label> <input type="email" class="form__input" value="" name="EMAIL" id="mce-EMAIL" placeholder="alice@awesome.io" required></p></div><div class="sr-only" aria-hidden="true"><input type="text" name="b_64781452976687d0f4f2ea370_772b9208b5" tabindex="-1" value=""></div></div><div class="form__actions"><button type="submit" class="btn btn--primary" name="subscribe">Subscribe</button><div class="form__feedback js-signup-widget-feedback" hidden></div><div class="spinner"><div class="spinner__layercontainer"><div class="spinner__layer spinner__layer--1"><div class="spinner__circle-clipper spinner__left"><div class="spinner__circle"></div></div><div class="spinner__gap-patch"><div class="spinner__circle"></div></div><div class="spinner__circle-clipper spinner__right"><div class="spinner__circle"></div></div></div><div class="spinner__layer spinner__layer--2"><div class="spinner__circle-clipper spinner__left"><div class="spinner__circle"></div></div><div class="spinner__gap-patch"><div class="spinner__circle"></div></div><div class="spinner__circle-clipper spinner__right"><div class="spinner__circle"></div></div></div><div class="spinner__layer spinner__layer--3"><div class="spinner__circle-clipper spinner__left"><div class="spinner__circle"></div></div><div class="spinner__gap-patch"><div class="spinner__circle"></div></div><div class="spinner__circle-clipper spinner__right"><div class="spinner__circle"></div></div></div><div class="spinner__layer spinner__layer--4"><div class="spinner__circle-clipper spinner__left"><div class="spinner__circle"></div></div><div class="spinner__gap-patch"><div class="spinner__circle"></div></div><div class="spinner__circle-clipper spinner__right"><div class="spinner__circle"></div></div></div></div></div></div></form></div></div><div class="signup__back js-signup-backside"></div><div class="signup__icon"><svg class="icon icon--check" role="img" aria-hidden="true" width="24" height="24"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/icons/icons.sprite.svg#icon-check"></use></svg></div></aside>
<h3 id="h-setting-the-theme"><a class="heading-anchor" href="#h-setting-the-theme" aria-hidden="true">#</a> Setting the Theme</h3>
<p>The last missing piece is some Javascript to handle the switcher functionality. This process is a bit more involved than we might initially assume. We need to check the user’s system preference through the <code>prefers-color-scheme</code> media query. But crucially, we also need to enable the user to override that preference, and then store the selected theme choice for later.</p>
<p>I’ve omitted some stuff here for brevity - see the <a href="https://github.com/maxboeck/mxb/blob/master/src/assets/scripts/modules/themepicker.js">full script</a> on Github for all the details.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// let's make this a new class</span><br><span class="token keyword">class</span> <span class="token class-name">ThemeSwitcher</span> <span class="token punctuation">{</span><br>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token comment">// define some state variables</span><br>        <span class="token keyword">this</span><span class="token punctuation">.</span>activeTheme <span class="token operator">=</span> <span class="token string">'default'</span><br><br>        <span class="token comment">// get all the theme buttons from before</span><br>        <span class="token keyword">this</span><span class="token punctuation">.</span>themeSelectBtns <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'button[data-theme-id]'</span><span class="token punctuation">)</span><br>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token comment">// determine if there is a preferred theme</span><br>        <span class="token keyword">const</span> systemPreference <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSystemPreference</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token keyword">const</span> storedPreference <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getStoredPreference</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><br>        <span class="token comment">// explicit choices overrule system defaults</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>storedPreference<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">this</span><span class="token punctuation">.</span>activeTheme <span class="token operator">=</span> storedPreference<br>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>systemPreference<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">this</span><span class="token punctuation">.</span>activeTheme <span class="token operator">=</span> systemPreference<br>        <span class="token punctuation">}</span><br><br>        <span class="token comment">// when clicked, get the theme id and pass it to a function</span><br>        Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>themeSelectBtns<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">btn</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>            <span class="token keyword">const</span> id <span class="token operator">=</span> btn<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>themeId<br>            btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setTheme</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token function">getSystemPreference</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token comment">// check if the system default is set to darkmode</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(prefers-color-scheme: dark)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>matches<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">return</span> <span class="token string">'dark'</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> <span class="token boolean">false</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token function">getStoredPreference</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token comment">// check if the user has selected a theme before</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> Storage <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">return</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"theme"</span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> <span class="token boolean">false</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// this whole thing only makes sense if custom properties are supported -</span><br><span class="token comment">// so let's check for that before initializing our switcher.</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token constant">CSS</span> <span class="token operator">&amp;&amp;</span> <span class="token constant">CSS</span><span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span><span class="token string">'color'</span><span class="token punctuation">,</span> <span class="token string">'var(--fake-var)'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">new</span> <span class="token class-name">ThemeSwitcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre>
<p>When somebody switches themes, we’ll take the theme id and set is as the <code>data-theme</code> attribute on the document. That will trigger the corresponding selector in our <code>theme.css</code> file, and the chosen color scheme will be applied.</p>
<p>Since we want the theme to persist even when the user reloads the page or navigates away, we’ll save the selected id in <code>localStorage</code>.</p>
<pre class="language-js"><code class="language-js"><span class="token function">setTheme</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// set the theme id on the &lt;html> element...</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>activeTheme <span class="token operator">=</span> id<br>    document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-theme'</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><br><br>    <span class="token comment">// and save the selection in localStorage for later</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hasLocalStorage<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"theme"</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>On a server-rendered site, we could store that piece of data in a cookie instead and apply the theme id to the html element before serving the page. Since we’re dealing with a static site here though, there is no server-side processing - so we have to do a small workaround.</p>
<p>We’ll retrieve the theme from <code>localStorage</code> in a tiny additional script in the head, right after the stylesheet is loaded. Contrary to the rest of the Javascript, we want this to execute as early as possible to avoid a FODT (“flash of default theme”).</p>
<p>👉 <strong>Update:</strong> Chris Coyier came up with the term “FART” (<a href="https://css-tricks.com/flash-of-inaccurate-color-theme-fart/">Flash of inAccurate ColoR Theme</a>) for this, which of course is way better.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/assets/css/main.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br>        <span class="token comment">// if there's a theme id in localstorage, use it on the &lt;html></span><br>        localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'theme'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <br>        document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-theme'</span><span class="token punctuation">,</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'theme'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span></code></pre>
<p>If no stored theme is found, the site uses the default color scheme (either light or dark, depending on the users <a href="https://web.dev/prefers-color-scheme/">system preference</a>).</p>
<h2 id="h-get-creative"><a class="heading-anchor" href="#h-get-creative" aria-hidden="true">#</a> Get creative</h2>
<p>You can create any number of themes this way, and they’re not limited to flat colors either - with some extra effort you can have patterns, gradients or even GIFs in your design. Although just because you can doesn’t always mean you should, as is evidenced by my site’s new <em>“Lobster Life”</em> theme.</p>
<p>Please don’t use that one.</p>

    </div>

    <div class="post__footer">
        <div hidden>
            <a class="u-url" href="https://mxb.dev/blog/color-theme-switcher/">Color Theme Switcher</a>
            <p class="h-card p-author">
                <a class="p-name u-url" rel="author" href="https://mxb.dev">Max Böck</a>
                <img class="u-photo" src="https://mxb.dev/assets/images/avatar2.jpg" />
            </p>
        </div>

        
            <p class="post__footer__info">
                Published in [code, design] &sdot; 30 Apr 2020 <br/>
                <a href="https://github.com/maxboeck/mxb/tree/master/./src/posts/color-theme-switcher/2020-04-30-index.md" title="suggest a change to this post by submitting a PR">Edit this Post</a>
            </p>

            <a
                href="https://front-end.social/@mxbck"
                target="_blank"
                rel="noopener noreferrer"
                title="Follow Max Böck on Mastodon"
                class="btn btn--mastodon"
            >
                <svg class="icon icon--mastodon" role="img" aria-hidden="true" width="24" height="24"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/icons/icons.sprite.svg#icon-mastodon"></use></svg> Follow @mxbck
            </a>
        
    </div>
</article>


<div class="postsection">
    <div class="postsection__header">
        <h3 class="postsection__title u-mb0">Webmentions</h3>
        <a href="https://indieweb.org/Webmention" class="postsection__info" target="_blank" rel="noopener noreferrer">
            <svg class="icon icon--question" role="img" aria-hidden="true" width="24" height="24"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/icons/icons.sprite.svg#icon-question"></use></svg> What’s this?
        </a>
    </div><div
    class="webmentions" 
    id="webmentions"
    data-url="https://mxb.dev/blog/color-theme-switcher/"
    data-last-fetched=""
>
    <div data-render-root>
        
            <p class="webmentions__empty">No webmentions yet.</p>
        
    </div>
</div>
</div>

<div class="postsection">
    <h3 class="postsection__title">Other things I've written</h3>
    

<ol class="otherposts">
    
        <li class="otherposts__item">
            <a href="/blog/seven-reasons-why-i-dont-write/" class="otherposts__link ">
                <span class="otherposts__title">7 Reasons why I don&#39;t write</span>
                <time class="otherposts__date" datetime="2023-01-30T00:00:00" aria-label=", written 30 Jan 2023">
                    30 Jan 2023
                </time>
            </a>
        </li>
    
        <li class="otherposts__item">
            <a href="/blog/the-indieweb-for-everyone/" class="otherposts__link ">
                <span class="otherposts__title">The IndieWeb for Everyone</span>
                <time class="otherposts__date" datetime="2022-11-12T00:00:00" aria-label=", written 12 Nov 2022">
                    12 Nov 2022
                </time>
            </a>
        </li>
    
        <li class="otherposts__item">
            <a href="/blog/make-free-stuff/" class="otherposts__link ">
                <span class="otherposts__title">Make Free Stuff</span>
                <time class="otherposts__date" datetime="2022-01-25T00:00:00" aria-label=", written 25 Jan 2022">
                    25 Jan 2022
                </time>
            </a>
        </li>
    
        <li class="otherposts__item">
            <a href="/blog/media-queries-in-times-of-container-queries/" class="otherposts__link ">
                <span class="otherposts__title">Media Queries in Times of @container</span>
                <time class="otherposts__date" datetime="2021-06-11T00:00:00" aria-label=", written 11 Jun 2021">
                    11 Jun 2021
                </time>
            </a>
        </li>
    
        <li class="otherposts__item">
            <a href="/blog/container-queries-web-components/" class="otherposts__link ">
                <span class="otherposts__title">Container Queries in Web Components</span>
                <time class="otherposts__date" datetime="2021-05-15T00:00:00" aria-label=", written 15 May 2021">
                    15 May 2021
                </time>
            </a>
        </li>
    
        <li class="otherposts__item">
            <a href="/blog/eleventy-asset-pipeline/" class="otherposts__link ">
                <span class="otherposts__title">Asset Pipelines in Eleventy</span>
                <time class="otherposts__date" datetime="2021-04-26T00:00:00" aria-label=", written 26 Apr 2021">
                    26 Apr 2021
                </time>
            </a>
        </li>
    
        <li class="otherposts__item">
            <a href="/blog/medium-share-highlight-eleventy/" class="otherposts__link ">
                <span class="otherposts__title">Medium-Style Share Highlights in Eleventy</span>
                <time class="otherposts__date" datetime="2021-04-13T00:00:00" aria-label=", written 13 Apr 2021">
                    13 Apr 2021
                </time>
            </a>
        </li>
    
        <li class="otherposts__item">
            <a href="/blog/space-jam/" class="otherposts__link ">
                <span class="otherposts__title">Space Jam</span>
                <time class="otherposts__date" datetime="2021-04-04T00:00:00" aria-label=", written 04 Apr 2021">
                    04 Apr 2021
                </time>
            </a>
        </li>
    
        <li class="otherposts__item">
            <a href="/blog/webmention-analytics/" class="otherposts__link ">
                <span class="otherposts__title">Webmention Analytics</span>
                <time class="otherposts__date" datetime="2021-02-07T00:00:00" aria-label=", written 07 Feb 2021">
                    07 Feb 2021
                </time>
            </a>
        </li>
    
        <li class="otherposts__item">
            <a href="/blog/persistent-build-folders-netlify/" class="otherposts__link ">
                <span class="otherposts__title">Making Persistent Build Folders in Netlify</span>
                <time class="otherposts__date" datetime="2021-01-05T00:00:00" aria-label=", written 05 Jan 2021">
                    05 Jan 2021
                </time>
            </a>
        </li>
    
</ol>
</div>

            </main>

            <footer class="footer h-card" role="contentinfo">
    <div class="footer__inner container">
        <p class="footer__item">
            <strong>&copy; 2012&ndash;2023</strong><br />
            <a class="p-name u-url" rel="me" href="https://mxb.dev">Max Böck</a>
        </p>

        <p class="footer__item">
            <strong>Subscribe</strong><br />
            <a href="/mailinglist">Mailing List</a>
        </p>

        <p class="footer__item">
            <strong>Social</strong><br />
            <a href="https://front-end.social/@mxbck" title="Mastodon" rel="me" >Mastodon</a> / 
            <a href="https://github.com/maxboeck" title="Github" rel="me">Github</a>
        </p>

        <p class="footer__item">
            <strong>Legal</strong><br />
            <a href="/privacy/">Privacy Policy</a>
        </p>

        <p class="footer__item">
            <strong>Links</strong><br />
            <a href="/blogroll/">Blogroll</a>
        </p>

        <p class="footer__item footer__item--right u-desktop-only">
            <a href="https://speedlify.mxb.dev/mxb.dev/" class="footer__speedlify">
                <speedlify-score speedlify-url="https://speedlify.mxb.dev" hash="7dda0135" score weight></speedlify-score>
            </a>
        </p>

        <p class="footer__item footer__item--right">
            <a href="https://github.com/maxboeck/mxb/tree/master/./src/posts/color-theme-switcher/2020-04-30-index.md" class="footer__icon" title="Edit this page on Github">
                <span class="sr-only">Edit this page on Github</span>
                <svg class="icon icon--github" role="img" aria-hidden="true" width="24" height="24"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/icons/icons.sprite.svg#icon-github"></use></svg>
            </a>
            <a href="/feed.xml" class="footer__icon" title="RSS Feed">
                <span class="sr-only">RSS Feed</span>
                <svg class="icon icon--feed" role="img" aria-hidden="true" width="24" height="24"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/icons/icons.sprite.svg#icon-feed"></use></svg>
            </a>
        </p>

    </div>
</footer>
        </div>

        
        <script src="/assets/scripts/main.js" defer></script><script src="/assets/scripts/webmentions.js" defer></script>
            <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></body>
</html>